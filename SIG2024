library(terra)

matrix<-matrix(runif(25), ncol=5,nrow=5)

raster<-rast(matrix) #transformando a matrix em raster!
plot(raster)

values(raster)[1:5]<-1:5 #extrair os valores do raster e substituir os valores de 1 a 5
plot(raster)

raster2<-rast(ncol=5, nrow=5, xmin=0,xmax=5, ymin=0, ymax=5)
values(raster2)<-1:25
plot(raster2)

crs(raster2) #saber qual o sistema de coordenadas

raster3 <- rast(matrix (runif(25), ncol=5, nrow=5))
junto <- rast (list(raster,raster3))
nlyr(junto)
plot(junto)

junto[[1]]
junto[[2]]

xyFromCell(raster,1:3)

cellFromXY(raster,matrix(c(3.5,2.5), nrow=1, ncol=2)) #posição da celula de tal coordenada

writeRaster(raster, "raster.tif", overwrite = T)

raster <- rast ("raster.tif")

mapbiomas<-rast("R/Dia 1/Tipos de dados/Raster/mapbioma_microbacia_araguaia.tif")

plot(mapbiomas)

####sistema de referência 
x<-c(1,2,3)
y<-c(2,3,4)
coords<-cbind(ID=1,x,y)
pontos<-terra::vect(coords)
terra::plot(pontos)

linhas<-vect(coords,type="lines")
plot(linhas)

x<-c(1,3,3)
y<-c(2,2,4)
coords<-cbind(ID=1,x,y)
poligono<-vect(coords,type="polygon")
plot(poligono)

ext(poligono) #extensão max e min do poligono
crs(poligono)

x2<-c(1,1,3)
y2<-c(2,4,4)
coords2<-cbind(ID=2,x2,y2)
coords_junto<-rbind(coords, coords2)
plot(coords_junto)
tabeladeatributos<-data.frame(ID=1:2,
                              dado=c("Inf","Sup"))
poligono2<-vect(coords_junto,atts=tabeladeatributos,type="polygon")
plot(poligono2, col=c("black","purple")) #com a tabela de atributos eu posso colorir o meu plot!

plot(poligono2[poligono2$dado=="Sup",],col="purple")
plot(poligono2[poligono2$dado=="Inf",],col="purple")

writeVector(poligono2,"poligono2.shp")

matrix<-matrix(runif(25),nrow=5,ncol=5)
raster<-terra::rast(matrix)

rast2<-rasterize(poligono,raster,touches=TRUE)
plot(rast2)
plot(poligono,add=TRUE)

to_poly<-as.polygons(rast2)
plot(to_poly)

#####
mapbiomas<-rast("R/Dia 1/Tipos de dados/Raster/mapbioma_microbacia_araguaia.tif")
plot(mapbiomas)
mapbiomas_poly<-as.polygons(mapbiomas)
plot(mapbiomas_poly)

grid<-vect("R/Dia 1/Tipos de dados/Raster/Grid_America do Sul/Adequabilidade_Micrurs.shp")
raster_grid<-rasterize(grid,rast(ext=ext(grid),crs=crs(grid),res=0.5))
plot(raster_grid)

###
#ex1: Crie um raster e adicione valores de uma distribuição normal com média 5 e desvio padrão 1.
raster1<- rast(matrix (runif(25), ncol=5, nrow=5))
coords1<-cbind(ID=1,raster1)

#ex2: Qual função utilizamos para extrairmos informações sobre os limites do raster, coordenadas geográficas e resolução espacial.
crs(raster1) 
xyFromCell(raster1,1:3)

#ex3: Substitua os valores de 5 células do raster.
values(raster1)[1:5]<-1:5
plot(raster1)

#ex4: Extraia valores que células específicas do raster.
cellFromXY(raster1,matrix(c(3.5,2.5), nrow=1, ncol=2))

#ex5: Transforme o raster em vetor.
vetor1<-as.polygons(raster1)
plot(vetor1)

#ex6: Crie 3 polígono a partir de uma matriz de coordenadas geográficas.
coords1 <- coords[c(1:2), ]   # Primeiro polígono
coords2 <- coords[c(2:3), ] # Segundo polígono

poly1 <- vect(coords1, type = "polygons", crs = crs(raster1))
poly2 <- vect(coords2, type = "polygons", crs = crs(raster1))

plot(raster1, main = "Raster com dois Polígonos")
plot(poly1, add = TRUE, col = "red", border = "red")
plot(poly2, add = TRUE, col = "red", border = "red")

#ex7: Anexe atributos aos polígonos.
coords_junto<-rbind(coords1, coords2)
plot(coords_junto)
tabeladeatributos<-data.frame(ID=1:2,
                              dado=c("Inf","Sup"))
poligono2<-vect(coords_junto,atts=tabeladeatributos,type="polygon")
plot(poligono2, col=c("black"))

#ex8: Transforme o vetor em raster.
rast2<-rasterize(poligono2,raster,touches=TRUE)
plot(rast2)
